import{a as E,v as w,b as F,p as h,s as x,x as A,e as B,o as s,f as l,h as u,t as d,y as m,z as _,F as n,r as y,u as p,k as c,A as V}from"./entry.918c3835.mjs";const q={class:"px-2 pt-3"},D={class:"text-2xl text-slate-600 border-b-2 border-zinc-700"},U={class:"container py-3 items-end"},Q={class:"wrapper mb-2"},z={class:"select-block px-2"},L=u("span",{class:"text-xs mb-1 block"},"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",-1),M=u("option",{value:null},"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",-1),N=["value"],R={key:0,class:"select-block px-2"},S=u("span",{class:"text-xs mb-1 block"},"\u0421\u0430\u0431\u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",-1),X=u("option",{value:null},"\u0421\u0430\u0431\u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",-1),G=["value"],O={class:"select-block px-2"},j=u("span",{class:"text-xs mb-1 block"},"\u041C\u0430\u0440\u043A\u0430",-1),H=u("option",{value:null},"\u041C\u0430\u0440\u043A\u0430",-1),I=["value"],J={key:1,class:"select-block px-2"},K=u("span",{class:"text-xs mb-1 block"},"\u041C\u043E\u0434\u0435\u043B\u044C",-1),P=u("option",{value:null},"\u041C\u043E\u0434\u0435\u043B\u044C",-1),T=["value"],W={class:"select-block px-2"},Y=u("span",{class:"text-xs mb-1 block"},"\u041F\u0440\u043E\u0438\u0437\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044C",-1),Z=u("option",{value:null},"\u041F\u0440\u043E\u0438\u0437\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044C",-1),ee=["value"],se=E({__name:"filter",props:["refresh"],emits:["changeQuery"],async setup(ue,{emit:f}){let r,b;const g=w(),i=F(),{data:k}=([r,b]=h(()=>x("/api/v1/filters","$5hdpGqCQFQ")),r=await r,b(),r),{data:v}=([r,b]=h(()=>x("/api/v1/categories","$XqEDBpiu8X")),r=await r,b(),r),t=A({category:+i.params.category||null,subcategory:+i.params.subcategory||null,model:+i.query.model||null,make:+i.query.make||null,supplier:+i.query.supplier||null}),$=B(()=>k.value.filter(a=>a.parent_id===t.make)),C=async()=>{let a={};for(let o in t)["category","subcategory"].indexOf(o)===-1&&t[o]&&(a[o]=t[o]);f("changeQuery",a),g.push({path:`/${i.params.locale}/${t.category}/${t.subcategory?t.subcategory+"/":""}page-1`,query:a})};return(a,o)=>(s(),l("div",null,[u("div",q,[u("h3",D,d(a.$t("filter")),1)]),u("div",U,[u("div",Q,[u("div",z,[u("label",null,[L,m(u("select",{class:"w-full form-input px-4 py-3 outline-0","onUpdate:modelValue":o[0]||(o[0]=e=>t.category=e)},[M,(s(!0),l(n,null,y(p(v),e=>(s(),l(n,{key:e.id},[e.parent_id===0?(s(),l("option",{key:0,value:e.id},d(e[`name_${p(i).params.locale}`]),9,N)):c("",!0)],64))),128))],512),[[_,t.category]])])]),t.category?(s(),l("div",R,[u("label",null,[S,m(u("select",{class:"w-full form-input px-4 py-3 outline-0","onUpdate:modelValue":o[1]||(o[1]=e=>t.subcategory=e)},[X,(s(!0),l(n,null,y(p(v),e=>(s(),l(n,{key:e.id},[e.parent_id===t.category?(s(),l("option",{key:0,value:e.id},d(e[`name_${a.$route.params.locale}`]),9,G)):c("",!0)],64))),128))],512),[[_,t.subcategory]])])])):c("",!0),u("div",O,[u("label",null,[j,m(u("select",{class:"w-full form-input px-4 py-3 outline-0","onUpdate:modelValue":o[2]||(o[2]=e=>t.make=e)},[H,(s(!0),l(n,null,y(p(k),e=>(s(),l(n,{key:e.id},[e.parent_id===3?(s(),l("option",{key:0,value:e.id},d(e[`name_${a.$route.params.locale}`]),9,I)):c("",!0)],64))),128))],512),[[_,t.make]])])]),t.make&&p($).length>0?(s(),l("div",J,[u("label",null,[K,m(u("select",{class:"w-full form-input px-4 py-3 outline-0","onUpdate:modelValue":o[3]||(o[3]=e=>t.model=e)},[P,(s(!0),l(n,null,y(p(k),e=>(s(),l(n,{key:e.id},[e.parent_id===t.make?(s(),l("option",{key:0,value:e.id},d(e[`name_${a.$route.params.locale}`]),9,T)):c("",!0)],64))),128))],512),[[_,t.model]])])])):c("",!0),u("div",W,[u("label",null,[Y,m(u("select",{class:"w-full form-input px-4 py-3 outline-0","onUpdate:modelValue":o[4]||(o[4]=e=>t.supplier=e)},[Z,(s(!0),l(n,null,y(p(k),e=>(s(),l(n,{key:e.id},[e.parent_id===2&&e[`name_${a.$route.params.locale}`]?(s(),l("option",{key:0,value:e.id},d(e[`name_${a.$route.params.locale}`]),9,ee)):c("",!0)],64))),128))],512),[[_,t.supplier]])])])]),u("button",{class:"filter-btn mx-2 mb-2 h-11 bg-slate-600 text-gray-100",onClick:o[5]||(o[5]=V(e=>C(),["prevent"]))},"\u0417\u043D\u0430\u0439\u0442\u0438")])]))}});export{se as _};
