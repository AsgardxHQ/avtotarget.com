import{a as V,v as q,b as B,p as h,s as x,I as C,e as D,o,f as a,h as t,t as d,B as _,D as m,u as l,F as r,r as y,k as c,A as F}from"./entry.d2fb6768.js";const U={class:"px-2 pt-3"},Q={class:"text-2xl text-slate-600 border-b-2 border-zinc-700"},A={class:"container py-3 items-end"},E={class:"wrapper mb-2"},L={class:"select-block px-2"},M=t("span",{class:"text-xs mb-1 block"},"Категория",-1),N=t("option",{value:null},"Категория",-1),R=["value"],S={key:0,class:"select-block px-2"},X=t("span",{class:"text-xs mb-1 block"},"Сабкатегория",-1),z=t("option",{value:null},"Сабкатегория",-1),G=["value"],I={class:"select-block px-2"},O=t("span",{class:"text-xs mb-1 block"},"Марка",-1),j=t("option",{value:null},"Марка",-1),H=["value"],J={key:1,class:"select-block px-2"},K=t("span",{class:"text-xs mb-1 block"},"Модель",-1),P=t("option",{value:null},"Модель",-1),T=["value"],W={class:"select-block px-2"},Y=t("span",{class:"text-xs mb-1 block"},"Производитель",-1),Z=t("option",{value:null},"Производитель",-1),ee=["value"],le=V({__name:"filter",props:["refresh"],emits:["changeQuery"],async setup(te,{emit:f}){let i,b;const g=q(),p=B(),{data:v}=([i,b]=h(()=>x("/api/v1/filters","$5hdpGqCQFQ")),i=await i,b(),i),{data:k}=([i,b]=h(()=>x("/api/v1/categories","$XqEDBpiu8X")),i=await i,b(),i),s=C({category:+p.params.category||null,subcategory:+p.params.subcategory||null,model:+p.query.model||null,make:+p.query.make||null,supplier:+p.query.supplier||null}),$=D(()=>v.value.filter(u=>u.parent_id===s.make)),w=async()=>{let u={};for(let n in s)["category","subcategory"].indexOf(n)===-1&&s[n]&&(u[n]=s[n]);f("changeQuery",u),g.push({path:`/${p.params.locale}/${s.category}/${s.subcategory?s.subcategory+"/":""}page-1`,query:u})};return(u,n)=>(o(),a("div",null,[t("div",U,[t("h3",Q,d(u.$t("filter")),1)]),t("div",A,[t("div",E,[t("div",L,[t("label",null,[M,_(t("select",{class:"w-full form-input px-4 py-3 outline-0","onUpdate:modelValue":n[0]||(n[0]=e=>l(s).category=e)},[N,(o(!0),a(r,null,y(l(k),e=>(o(),a(r,{key:e.id},[e.parent_id===0?(o(),a("option",{key:0,value:e.id},d(e[`name_${l(p).params.locale}`]),9,R)):c("",!0)],64))),128))],512),[[m,l(s).category]])])]),l(s).category?(o(),a("div",S,[t("label",null,[X,_(t("select",{class:"w-full form-input px-4 py-3 outline-0","onUpdate:modelValue":n[1]||(n[1]=e=>l(s).subcategory=e)},[z,(o(!0),a(r,null,y(l(k),e=>(o(),a(r,{key:e.id},[e.parent_id===l(s).category?(o(),a("option",{key:0,value:e.id},d(e[`name_${u.$route.params.locale}`]),9,G)):c("",!0)],64))),128))],512),[[m,l(s).subcategory]])])])):c("",!0),t("div",I,[t("label",null,[O,_(t("select",{class:"w-full form-input px-4 py-3 outline-0","onUpdate:modelValue":n[2]||(n[2]=e=>l(s).make=e)},[j,(o(!0),a(r,null,y(l(v),e=>(o(),a(r,{key:e.id},[e.parent_id===3?(o(),a("option",{key:0,value:e.id},d(e[`name_${u.$route.params.locale}`]),9,H)):c("",!0)],64))),128))],512),[[m,l(s).make]])])]),l(s).make&&l($).length>0?(o(),a("div",J,[t("label",null,[K,_(t("select",{class:"w-full form-input px-4 py-3 outline-0","onUpdate:modelValue":n[3]||(n[3]=e=>l(s).model=e)},[P,(o(!0),a(r,null,y(l(v),e=>(o(),a(r,{key:e.id},[e.parent_id===l(s).make?(o(),a("option",{key:0,value:e.id},d(e[`name_${u.$route.params.locale}`]),9,T)):c("",!0)],64))),128))],512),[[m,l(s).model]])])])):c("",!0),t("div",W,[t("label",null,[Y,_(t("select",{class:"w-full form-input px-4 py-3 outline-0","onUpdate:modelValue":n[4]||(n[4]=e=>l(s).supplier=e)},[Z,(o(!0),a(r,null,y(l(v),e=>(o(),a(r,{key:e.id},[e.parent_id===2&&e[`name_${u.$route.params.locale}`]?(o(),a("option",{key:0,value:e.id},d(e[`name_${u.$route.params.locale}`]),9,ee)):c("",!0)],64))),128))],512),[[m,l(s).supplier]])])])]),t("button",{class:"filter-btn mx-2 mb-2 h-11 bg-slate-600 text-gray-100",onClick:n[5]||(n[5]=F(e=>w(),["prevent"]))},"Знайти")])]))}});export{le as _};
